import{Eb as u,H as p,M as c,R as h,o as n,w as o}from"./chunk-4CJDLHC2.js";var m=class s{constructor(i){this.http=i}apiCart="https://task4-2d93e-default-rtdb.europe-west1.firebasedatabase.app/userCart";getProduct(i){return this.http.get(`${this.apiCart}.json`).pipe(n(t=>t?Object.values(t).filter(r=>r.userId===i.userId):[]),o(t=>{throw console.error("Error fetching cart items:",t),t}))}createProduct(i){return this.http.post(`${this.apiCart}.json`,i).pipe(o(t=>{throw console.error("Error adding product to cart:",t),t}))}updateQuantity(i,t,r){return this.http.get(`${this.apiCart}.json`).pipe(n(e=>{let a=Object.keys(e).find(d=>String(e[d].id)===String(i)&&e[d].userId.toString()===t);if(a)return this.http.patch(`${this.apiCart}/${a}.json`,{quantity:r});throw new Error("Product with this id and userId not found")}),p(e=>e),o(e=>{throw console.error("Error updating product quantity:",e),e}))}deleteProduct(i,t){return this.http.get(`${this.apiCart}.json`).pipe(n(r=>{let e=Object.keys(r).find(a=>String(r[a].id)===String(i)&&r[a].userId.toString()===t);if(e)return this.http.delete(`${this.apiCart}/${e}.json`);throw new Error("Product with this id and userId not found")}),p(r=>r),o(r=>{throw console.error("Error deleting product:",r),r}))}static \u0275fac=function(t){return new(t||s)(h(u))};static \u0275prov=c({token:s,factory:s.\u0275fac,providedIn:"root"})};export{m as a};
